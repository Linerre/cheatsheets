\documentclass[a4paper,12pt]{article}
% Color
\usepackage[dvipsname]{xcolor}

% Math
\usepackage{mathtools}
\numberwithin{equation}{subsection}
\setlength{\jot}{8pt}% Add vertical space in align* env
\setlength{\abovedisplayskip}{0pt}%
\setlength{\belowdisplayskip}{0pt}%
\setlength{\abovedisplayshortskip}{0pt}%
\setlength{\belowdisplayshortskip}{0pt}%

% Layout
\usepackage[left=2cm]{geometry}

\begin{document}
\section{Solutions to Question 1}
% \input{assign2q1}

\section{Solutions to Question 2}
\subsection{Suitable Invariant}
\label{sec:2.1}
% \input{q2n1}
\subsection{Solution for suitable invariant}

\input{q2n2}
\subsection{Solution}
Following the above proof steps, now check that \texttt{Init} has \(I\) as the post-condition:
\begin{flalign*}
\mathsf{6.}\: & \{y=(m+0)!/m!\}\;\texttt{\textcolor{blue}{i:=0}}\;\{y=(m+i)!/m!\} & \mathsf{(Asst.\, Axiom)} \\
\mathsf{7.}\: & \{1=(m+0)!/m!\}\;\texttt{\textcolor{blue}{y:=1}}\;\{y=(m+0)!/m!\} & \mathsf{(Asst.\, Axiom)} \\
\mathsf{8.}\: & \{1=(x+0)!/x!\}\;\texttt{\textcolor{blue}{m:=x}}\;\{1=(m+0)!/m!\} & \mathsf{(Asst.\, Axiom)} \\
\mathsf{9.}\: & \{1=(x+0)!/x!\}\;\texttt{\textcolor{blue}{m:=x;\;y:=1;\;i:=0;}}\;\{1=(m+0)!/m!\} & \mathsf{(6,7,8,\;Sequencing)}
\end{flalign*}
Hence, before starting \texttt{Loop}, \(I,\;\text{i.e},\;y=(m+i)!/m!\) holds. One now has:
% TODO: use bussproof to draw the tree
\begin{align*}
  \frac{\{y=(m+i)!/m!\}\;y:=y\,*\,m;\;m:=m-1;\;i:=i+1\;\{y=(m+i)!/m!\}}{\{y=(m+i)!/m!\}\;\begin{multilined}[t]
      \mathsf{while}\;(i < n)\;\mathsf{do}\\
      \;y:=y\,*\,m;\\
      \;m:=m-1;\\
      \;i:=i+1;\\
      \;\{(y=(m+i)!/m!)\;\land\;\neg\;(i < n)\}}\end{multlined}
\end{align*}

\begin{flalign*}
\mathsf{6.}\: & \{y=(m+i)!/m!\;\land\;i < n\}\;\texttt{\textcolor{blue}{Body}}\;\{y=(m+i)!/m!\} & \mathsf{(Prec.\, Strengthen.)}  \\
\mathsf{7.}\: & \{y=(m+i)!/m!\;\land\;i < n\}\;\texttt{\textcolor{blue}{Loop}}\;\{y=x!/(x-n)!\} & \mathsf{(While.,\;Post.\, Weaken.)}
\end{flalign*}


\end{document}
